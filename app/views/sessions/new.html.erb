<% content_for(:title, "Sign In") %>

<!-- Header -->
<div class="text-center mb-12">
  <div class="avatar mb-6">
    <div class="w-20 h-20 rounded-full bg-primary/10 flex! items-center justify-center">
      <svg class="w-10 h-10 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
      </svg>
    </div>
  </div>
  <h1 class="text-3xl font-bold text-base-content mb-2">Welcome Back</h1>
  <p class="text-base-content/60 text-lg">Sign in with your passkey</p>
</div>

<!-- Passkey Login Form -->
<div data-controller="authentication"
      data-authentication-session-url-value="<%= session_path %>"
      data-authentication-callback-url-value="<%= callback_session_path %>">

  <!-- Passkey Login Button -->
  <button type="button"
          class="btn btn-primary w-full mb-6 h-14 text-lg"
          data-action="click->authentication#callback">
    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 16.5a6 6 0 01-7.743-5.743A6 6 0 0111 4.5a6 6 0 017.743 5.743z"/>
    </svg>
    <span data-passkey-login-target="buttonText">Sign in with Passkey</span>
  </button>

  <!-- Loading State -->
  <div class="hidden" data-passkey-login-target="loading">
    <div class="flex items-center justify-center py-6">
      <span class="loading loading-spinner loading-lg text-primary mr-3"></span>
      <span class="text-base-content/60 text-lg">Authenticating...</span>
    </div>
  </div>

  <!-- Error Message -->
  <div class="hidden alert alert-error mb-6" data-passkey-login-target="error">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    <span data-passkey-login-target="errorMessage">Authentication failed. Please try again.</span>
  </div>
</div>

<!-- Divider -->
<div class="divider text-base-content/40 my-8">OR</div>

<!-- Alternative Actions -->
<div class="space-y-6">
  <!-- Register Link -->
  <div class="text-center">
    <p class="text-base-content/60 text-base">
      Don't have an account?
      <%= link_to "Create one", registration_path, class: "link link-primary font-medium" %>
    </p>
  </div>
</div>
